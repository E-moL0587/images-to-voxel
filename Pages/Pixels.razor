@using Microsoft.AspNetCore.Components
@using SixLabors.ImageSharp
@using SixLabors.ImageSharp.Processing
@inject HttpClient HttpClient

<img src="@ProcessedDataUrl" alt="Processed Image" />

@code {
  private string ProcessedDataUrl;

  protected override async Task OnInitializedAsync()
  {
    var imagePath = "images/front.png";

    using (var response = await HttpClient.GetAsync(imagePath))
    using (var stream = await response.Content.ReadAsStreamAsync())
    {
      var image = await Image.LoadAsync(stream);
      image.Mutate(x => x.Grayscale());

      using (var memoryStream = new MemoryStream())
      {
        await image.SaveAsPngAsync(memoryStream);
        ProcessedDataUrl = $"data:image/png;base64,{Convert.ToBase64String(memoryStream.ToArray())}";
      }
    }
  }
}
